version: '3.6'

services:

  tests_unit:
    build:
      context: .
      dockerfile: ./docker/app/Dockerfile
      target: static_analysis
    volumes:
      - ./:/app/

  tests_architecture:
    build:
      context: .
      dockerfile: ./docker/app/Dockerfile
      target: static_analysis
    command: [ "composer", "tests:architecture" ]
    volumes:
      - ./:/app/

  build_app:
    build:
      context: .
      dockerfile: ./docker/build/Dockerfile
